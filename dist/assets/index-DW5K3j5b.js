(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}})();const g=document.getElementById("game"),c=document.getElementById("player"),B=document.getElementById("score"),v=document.getElementById("message"),I=document.getElementById("restart");let E=window.innerWidth,u=0,h=0;const A=1.1,T=18;let b=!0,p=[],d=[],R=8,m=R,a=0,w=0,y=localStorage.getItem("highScore")||0,L=!1,f=0;const W=800,D=2e3,F=["#FF3344","#FFAA33","#33FF88","#33Aaff","#aa33ff","#ff33cc","#44ff99","#ff6666","#33ffaa","#00ffff","#ffcc00"];let x=0,O=!1;function $(){E=window.innerWidth}window.addEventListener("resize",$);function C(){L||b&&(h=T,b=!1,O||(O=!0,x+=90,c.style.transition="transform 0.25s linear",c.style.transform=`rotate(${x-15}deg)`,setTimeout(()=>{c.style.transition="transform 0.3s ease-out",c.style.transform=`rotate(${x}deg)`,setTimeout(()=>{O=!1},300)},250)))}function H(){const o=Math.random();let n;o<.7?n=Math.floor(Math.random()*2)+1:n=3;const e=35,s=25+Math.random()*25;let t=document.createElement("div");t.style.position="absolute",t.style.right="0px",t.style.bottom="0px",t.style.width=s+"px",t.style.height=e*n+"px",t.style.pointerEvents="none";const r=F[Math.floor(Math.random()*F.length)];for(let l=0;l<n;l++){let i=document.createElement("div");i.classList.add("obstacle"),i.style.width=s+"px",i.style.height=e+"px",i.style.position="absolute",i.style.bottom=l*e+"px",i.style.left="0",i.style.backgroundColor=r,i.style.boxShadow=`0 0 8px ${r}`,t.appendChild(i)}g.appendChild(t),p.push(t),Math.random()<.25&&n<=3&&k(s,n*e)}function k(o,n){const e=document.createElement("div");e.classList.add("star"),e.style.position="absolute",e.style.width="20px",e.style.height="20px",e.style.right="0px",e.style.bottom=`${n+20}px`,g.appendChild(e),d.push(e)}function M(o,n,e=6){return!(o.right-e<n.left+e||o.left+e>n.right-e||o.bottom-e<n.top+e||o.top+e>n.bottom-e)}function G(o){if(L)return;b||(h-=A,u+=h,u<=0&&(u=0,b=!0,h=0),c.style.bottom=u+"px"),w+=m/100,a=Math.floor(w),B.textContent=`Score: ${a}  |  High Score: ${y}`,m=R+a*.04;const n=c.getBoundingClientRect();for(let e=p.length-1;e>=0;e--){let s=p[e],t=parseFloat(s.style.right);if(t+=m,s.style.right=t+"px",t>E+50)s.remove(),p.splice(e,1);else for(let r of s.children){const l=r.getBoundingClientRect();if(M(n,l)){N();return}}}for(let e=d.length-1;e>=0;e--){let s=d[e],t=parseFloat(s.style.right);t+=m,s.style.right=t+"px";const r=s.getBoundingClientRect();M(n,r,4)?(a+=5,w+=5,g.removeChild(s),d.splice(e,1)):t>E+50&&(g.removeChild(s),d.splice(e,1))}f||(f=o),o-f>W&&(o-f>D||Math.random()<.02)&&(H(),f=o),requestAnimationFrame(G)}function N(){L=!0,S(`Game Over! Your score: ${a}`),a>y&&(y=a,localStorage.setItem("highScore",y),S(`New High Score! ${a}`)),I.style.display="block"}function S(o){v.textContent=o,v.style.opacity="1",setTimeout(()=>{v.style.opacity="0"},4e3)}function P(){window.addEventListener("keydown",q),window.addEventListener("mousedown",C),window.addEventListener("touchstart",o=>{o.preventDefault(),C()},{passive:!1})}function q(o){["Space","ArrowUp","KeyW"].includes(o.code)&&(o.preventDefault(),C())}I.addEventListener("click",()=>{location.reload()});function K(){P(),S("WELCOME TO THE WORLD OF BLOCKS"),requestAnimationFrame(G)}c.style.bottom="0px";B.textContent=`Score: ${a}`;$();K();
